---
 - name: Update and Upgrade all
   homebrew:
     update_homebrew: yes
     upgrade_all: yes

 - name: brew tap
   homebrew_tap:
     tap: "{{ item }}"
     state: present
   with_items: homebrew_taps

 - name: install brew cask
   homebrew: name=brew-cask state=latest

 - name: Install java
   homebrew_cask: name=java state=present

 - name: Install packages
   homebrew:
     name: "{{ item.name }}"
     state: latest
     install_options: "{{ item.install_options|default() }}"
   with_items: homebrew_packages